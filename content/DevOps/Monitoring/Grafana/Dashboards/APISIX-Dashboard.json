{
    "__inputs": [
        {
            "name": "DS_PROMETHEUS",
            "label": "Prometheus",
            "description": "",
            "type": "datasource",
            "pluginId": "prometheus",
            "pluginName": "Prometheus"
        }
    ],
    "__requires": [
        {
            "type": "grafana",
            "id": "grafana",
            "name": "Grafana",
            "version": "7.3.7"
        },
        {
            "type": "panel",
            "id": "graph",
            "name": "Graph",
            "version": ""
        },
        {
            "type": "datasource",
            "id": "prometheus",
            "name": "Prometheus",
            "version": "1.0.0"
        },
        {
            "type": "panel",
            "id": "singlestat",
            "name": "Singlestat",
            "version": ""
        },
        {
            "type": "panel",
            "id": "stat",
            "name": "Stat",
            "version": ""
        }
    ],
    "annotations": {
        "list": [
            {
                "builtIn": 1,
                "datasource": "${DS_PROMETHEUS}",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "limit": 100,
                "name": "Annotations & Alerts",
                "showIn": 0,
                "type": "dashboard"
            }
        ]
    },
    "description": "Dashboard for MicroService API Gateway Apache APISIX, made by hambn",
    "editable": true,
    "gnetId": null,
    "graphTooltip": 1,
    "id": null,
    "iteration": null,
    "links": [],
    "panels": [
        {
            "collapsed": true,
            "id": null,
            "panels": [
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "thresholds"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "blue"
                                    }
                                ]
                            }
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 6,
                        "w": 8,
                        "x": 0,
                        "y": 1
                    },
                    "id": null,
                    "options": {
                        "colorMode": "value",
                        "graphMode": "area",
                        "justifyMode": "auto",
                        "orientation": "auto",
                        "percentChangeColorMode": "standard",
                        "reduceOptions": {
                            "calcs": ["lastNotNull"],
                            "fields": "",
                            "values": false
                        },
                        "showPercentChange": false,
                        "textMode": "auto",
                        "wideLayout": true
                    },
                    "targets": [
                        {
                            "expr": "sum(apisix_http_requests_total{instance=~\"$instance\"})",
                            "instant": false,
                            "legendFormat": "Total",
                            "range": true,
                            "refId": "A"
                        }
                    ],
                    "title": "Total Requests",
                    "type": "stat"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "thresholds"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "blue",
                                        "value": null
                                    }
                                ]
                            }
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 6,
                        "w": 8,
                        "x": 8,
                        "y": 1
                    },
                    "id": null,
                    "options": {
                        "colorMode": "value",
                        "graphMode": "area",
                        "justifyMode": "auto",
                        "orientation": "auto",
                        "percentChangeColorMode": "standard",
                        "reduceOptions": {
                            "calcs": ["lastNotNull"],
                            "fields": "",
                            "values": false
                        },
                        "showPercentChange": false,
                        "textMode": "auto",
                        "wideLayout": true
                    },
                    "targets": [
                        {
                            "expr": "sum(apisix_nginx_http_current_connections{state=\"accepted\", instance=~\"$instance\"})",
                            "instant": false,
                            "legendFormat": "Accepted",
                            "range": true,
                            "refId": "A"
                        }
                    ],
                    "title": "Accepted Connections",
                    "type": "stat"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "thresholds"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "blue",
                                        "value": null
                                    }
                                ]
                            }
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 6,
                        "w": 8,
                        "x": 16,
                        "y": 1
                    },
                    "id": null,
                    "options": {
                        "colorMode": "value",
                        "graphMode": "area",
                        "justifyMode": "auto",
                        "orientation": "auto",
                        "percentChangeColorMode": "standard",
                        "reduceOptions": {
                            "calcs": ["lastNotNull"],
                            "fields": "",
                            "values": false
                        },
                        "showPercentChange": false,
                        "textMode": "auto",
                        "wideLayout": true
                    },
                    "targets": [
                        {
                            "editorMode": "code",
                            "expr": "sum(apisix_nginx_http_current_connections{state=\"handled\", instance=~\"$instance\"})",
                            "instant": false,
                            "legendFormat": "Total",
                            "range": true,
                            "refId": "A"
                        }
                    ],
                    "title": "Handled Connections",
                    "type": "stat"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "color": {
                                "mode": "palette-classic"
                            },
                            "custom": {
                                "axisBorderShow": false,
                                "axisCenteredZero": false,
                                "axisColorMode": "text",
                                "axisLabel": "",
                                "axisPlacement": "auto",
                                "barAlignment": 0,
                                "drawStyle": "line",
                                "fillOpacity": 3,
                                "gradientMode": "none",
                                "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                },
                                "insertNulls": false,
                                "lineInterpolation": "linear",
                                "lineWidth": 1,
                                "pointSize": 5,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "showPoints": "auto",
                                "spanNulls": false,
                                "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            }
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 24,
                        "x": 0,
                        "y": 7
                    },
                    "id": 94,
                    "options": {
                        "legend": {
                            "calcs": ["lastNotNull", "max", "min", "mean"],
                            "displayMode": "table",
                            "placement": "right",
                            "showLegend": true
                        },
                        "tooltip": {
                            "mode": "single",
                            "sort": "none"
                        }
                    },
                    "targets": [
                        {
                            "expr": "sum(apisix_nginx_http_current_connections{state=~\"active|reading|writing|waiting\", instance=~\"$instance\"}) by (state)",
                            "instant": false,
                            "legendFormat": "{{state}}",
                            "range": true,
                            "refId": "A"
                        }
                    ],
                    "title": "Nginx connection state",
                    "type": "timeseries"
                }
            ],
            "title": "APISIX Nginx",
            "type": "row"
        },
        {
            "collapsed": true,
            "id": null,
            "panels": [
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "custom": {
                                "drawStyle": "line",
                                "lineInterpolation": "linear",
                                "barAlignment": 0,
                                "lineWidth": 1,
                                "fillOpacity": 4,
                                "gradientMode": "none",
                                "spanNulls": false,
                                "insertNulls": false,
                                "showPoints": "auto",
                                "pointSize": 5,
                                "stacking": {
                                    "mode": "none",
                                    "group": "A"
                                },
                                "axisPlacement": "auto",
                                "axisLabel": "",
                                "axisColorMode": "text",
                                "axisBorderShow": false,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "axisCenteredZero": false,
                                "hideFrom": {
                                    "tooltip": false,
                                    "viz": false,
                                    "legend": false
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "color": {
                                "mode": "palette-classic"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "decbytes"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 24,
                        "x": 0,
                        "y": 2
                    },
                    "id": null,
                    "options": {
                        "tooltip": {
                            "mode": "single",
                            "sort": "none"
                        },
                        "legend": {
                            "showLegend": true,
                            "displayMode": "table",
                            "placement": "right",
                            "calcs": ["min", "max", "mean"]
                        }
                    },
                    "targets": [
                        {
                            "expr": "sum(rate(apisix_bandwidth{instance=~\"$instance\"}[$__interval])) by (type)",
                            "instant": false,
                            "legendFormat": "{{type}}",
                            "range": true,
                            "refId": "A"
                        }
                    ],
                    "title": "Total Bandwidth",
                    "type": "timeseries"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "custom": {
                                "drawStyle": "line",
                                "lineInterpolation": "linear",
                                "barAlignment": 0,
                                "lineWidth": 1,
                                "fillOpacity": 4,
                                "gradientMode": "none",
                                "spanNulls": false,
                                "insertNulls": false,
                                "showPoints": "auto",
                                "pointSize": 5,
                                "stacking": {
                                    "mode": "none",
                                    "group": "A"
                                },
                                "axisPlacement": "auto",
                                "axisLabel": "",
                                "axisColorMode": "text",
                                "axisBorderShow": false,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "axisCenteredZero": false,
                                "hideFrom": {
                                    "tooltip": false,
                                    "viz": false,
                                    "legend": false
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "color": {
                                "mode": "palette-classic"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "decbytes"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 24,
                        "x": 0,
                        "y": 9
                    },
                    "id": 97,
                    "options": {
                        "tooltip": {
                            "mode": "single",
                            "sort": "none"
                        },
                        "legend": {
                            "showLegend": true,
                            "displayMode": "table",
                            "placement": "right",
                            "calcs": ["min", "max", "mean"]
                        }
                    },
                    "targets": [
                        {
                            "expr": "sum(irate(apisix_bandwidth{type=\"ingress\",service =~\"$service\",route=~\"$route\",instance=~\"$instance\"}[$__interval])) by (route)",
                            "legendFormat": "service:{{service}}",
                            "refId": "routes"
                        },
                        {
                            "expr": "sum(irate(apisix_bandwidth{type=\"ingress\",service =~\"$service\",route=~\"$route\",instance=~\"$instance\"}[$__interval])) by (service)",
                            "legendFormat": "route:{{route}}",
                            "refId": "services"
                        }
                    ],
                    "title": "Ingress per service/route",
                    "type": "timeseries"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "custom": {
                                "drawStyle": "line",
                                "lineInterpolation": "linear",
                                "barAlignment": 0,
                                "lineWidth": 1,
                                "fillOpacity": 4,
                                "gradientMode": "none",
                                "spanNulls": false,
                                "insertNulls": false,
                                "showPoints": "auto",
                                "pointSize": 5,
                                "stacking": {
                                    "mode": "none",
                                    "group": "A"
                                },
                                "axisPlacement": "auto",
                                "axisLabel": "",
                                "axisColorMode": "text",
                                "axisBorderShow": false,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "axisCenteredZero": false,
                                "hideFrom": {
                                    "tooltip": false,
                                    "viz": false,
                                    "legend": false
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "color": {
                                "mode": "palette-classic"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "decbytes"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 24,
                        "x": 0,
                        "y": 16
                    },
                    "id": 98,
                    "options": {
                        "tooltip": {
                            "mode": "single",
                            "sort": "none"
                        },
                        "legend": {
                            "showLegend": true,
                            "displayMode": "table",
                            "placement": "right",
                            "calcs": ["min", "max", "mean"]
                        }
                    },
                    "targets": [
                        {
                            "expr": "sum(irate(apisix_bandwidth{type=\"egress\",service =~\"$service\",route=~\"$route\",instance=~\"$instance\"}[$__interval])) by (route)",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "service:{{service}}",
                            "range": true,
                            "refId": "routes"
                        },
                        {
                            "expr": "sum(irate(apisix_bandwidth{type=\"egress\",service =~\"$service\",route=~\"$route\",instance=~\"$instance\"}[$__interval])) by (service)",
                            "instant": false,
                            "legendFormat": "route:{{route}}",
                            "range": true,
                            "refId": "services"
                        }
                    ],
                    "title": "Egress per service/route",
                    "type": "timeseries"
                }
            ],
            "title": "APISIX Bandwidth",
            "type": "row"
        },
        {
            "collapsed": true,
            "id": null,
            "panels": [
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "dark-red",
                                        "value": null
                                    },
                                    {
                                        "color": "dark-yellow",
                                        "value": 70
                                    },
                                    {
                                        "color": "semi-dark-yellow",
                                        "value": 80
                                    },
                                    {
                                        "color": "yellow",
                                        "value": 82.5
                                    },
                                    {
                                        "color": "light-yellow",
                                        "value": 85
                                    },
                                    {
                                        "color": "super-light-yellow",
                                        "value": 87.5
                                    },
                                    {
                                        "color": "super-light-green",
                                        "value": 90
                                    },
                                    {
                                        "color": "light-green",
                                        "value": 92.5
                                    },
                                    {
                                        "color": "green",
                                        "value": 95
                                    },
                                    {
                                        "color": "semi-dark-green",
                                        "value": 97.5
                                    },
                                    {
                                        "color": "dark-green",
                                        "value": 100
                                    }
                                ]
                            },
                            "color": {
                                "mode": "thresholds"
                            },
                            "unit": "percent"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 5,
                        "x": 0,
                        "y": 3
                    },
                    "id": null,
                    "options": {
                        "reduceOptions": {
                            "values": false,
                            "calcs": ["lastNotNull"],
                            "fields": ""
                        },
                        "orientation": "auto",
                        "showThresholdLabels": false,
                        "showThresholdMarkers": true,
                        "sizing": "auto",
                        "minVizWidth": 75,
                        "minVizHeight": 75
                    },
                    "pluginVersion": "11.1.0",
                    "targets": [
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\", route=~\"$route\", instance=~\"$instance\", code!~\"5..\"}[$__interval]))\r\n/\r\nsum(rate(apisix_http_status{service=~\"$service\", route=~\"$route\", instance=~\"$instance\"}[$__interval])) * 100",
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "A"
                        }
                    ],
                    "title": "Percentage of successful responses",
                    "type": "gauge"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "custom": {
                                "drawStyle": "line",
                                "lineInterpolation": "smooth",
                                "barAlignment": 0,
                                "lineWidth": 2,
                                "fillOpacity": 5,
                                "gradientMode": "scheme",
                                "spanNulls": false,
                                "insertNulls": false,
                                "showPoints": "auto",
                                "pointSize": 5,
                                "stacking": {
                                    "mode": "none",
                                    "group": "A"
                                },
                                "axisPlacement": "auto",
                                "axisLabel": "",
                                "axisColorMode": "series",
                                "axisBorderShow": false,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "axisCenteredZero": false,
                                "hideFrom": {
                                    "tooltip": false,
                                    "viz": false,
                                    "legend": false
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                },
                                "lineStyle": {
                                    "fill": "solid"
                                }
                            },
                            "color": {
                                "mode": "thresholds",
                                "seriesBy": "last"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "dark-red",
                                        "value": null
                                    },
                                    {
                                        "color": "dark-yellow",
                                        "value": 70
                                    },
                                    {
                                        "color": "semi-dark-yellow",
                                        "value": 80
                                    },
                                    {
                                        "color": "yellow",
                                        "value": 82.5
                                    },
                                    {
                                        "color": "light-yellow",
                                        "value": 85
                                    },
                                    {
                                        "color": "super-light-yellow",
                                        "value": 87.5
                                    },
                                    {
                                        "color": "super-light-green",
                                        "value": 90
                                    },
                                    {
                                        "color": "light-green",
                                        "value": 92.5
                                    },
                                    {
                                        "color": "green",
                                        "value": 95
                                    },
                                    {
                                        "color": "semi-dark-green",
                                        "value": 97.5
                                    },
                                    {
                                        "color": "dark-green",
                                        "value": 100
                                    }
                                ]
                            },
                            "fieldMinMax": false,
                            "max": 100,
                            "unit": "percent"
                        },
                        "overrides": [
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "not 500 of total"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "not server error responses"
                                    }
                                ]
                            }
                        ]
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 19,
                        "x": 5,
                        "y": 3
                    },
                    "id": null,
                    "options": {
                        "tooltip": {
                            "mode": "single",
                            "sort": "none",
                            "maxHeight": 600
                        },
                        "legend": {
                            "showLegend": true,
                            "displayMode": "table",
                            "placement": "right",
                            "calcs": ["min", "max"]
                        }
                    },
                    "targets": [
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\", route=~\"$route\", instance=~\"$instance\", code!~\"5..\"}[$__interval]))\r\n/\r\nsum(rate(apisix_http_status{service=~\"$service\", route=~\"$route\", instance=~\"$instance\"}[$__interval])) * 100",
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "not 500 of total"
                        }
                    ],
                    "title": "Percentage of successful responses",
                    "type": "timeseries"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "#ffffff",
                                        "value": 0
                                    }
                                ]
                            },
                            "color": {
                                "mode": "thresholds"
                            }
                        },
                        "overrides": [
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "total"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "total RPS"
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "not 5XX's"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "not 5XX's RPS"
                                    },
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "dark-green",
                                            "mode": "fixed"
                                        }
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "2XX's"
                                },
                                "properties": [
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "light-green",
                                            "mode": "fixed"
                                        }
                                    },
                                    {
                                        "id": "displayName",
                                        "value": "2XX's RPS"
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "3XX's"
                                },
                                "properties": [
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "dark-purple",
                                            "mode": "fixed"
                                        }
                                    },
                                    {
                                        "id": "displayName",
                                        "value": "3XX's RPS"
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "4XX's"
                                },
                                "properties": [
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "yellow",
                                            "mode": "fixed"
                                        }
                                    },
                                    {
                                        "id": "displayName",
                                        "value": "4XX's RPS"
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "5XX's"
                                },
                                "properties": [
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "dark-red",
                                            "mode": "fixed"
                                        }
                                    },
                                    {
                                        "id": "displayName",
                                        "value": "5XX's RPS"
                                    }
                                ]
                            }
                        ]
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 24,
                        "x": 0,
                        "y": 10
                    },
                    "id": null,
                    "options": {
                        "reduceOptions": {
                            "values": false,
                            "calcs": ["lastNotNull"],
                            "fields": ""
                        },
                        "orientation": "auto",
                        "showThresholdLabels": false,
                        "showThresholdMarkers": false,
                        "sizing": "auto",
                        "minVizWidth": 75,
                        "minVizHeight": 75
                    },
                    "targets": [
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\", route=~\"$route\", instance=~\"$instance\"}[$__interval]))",
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "total"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\", route=~\"$route\", instance=~\"$instance\", code!~\"5..\"}[$__interval]))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "not 5XX's"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\", route=~\"$route\", instance=~\"$instance\", code=~\"2..\"}[$__interval]))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "2XX's"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\", route=~\"$route\", instance=~\"$instance\", code=~\"3..\"}[$__interval]))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "3XX's"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\", route=~\"$route\", instance=~\"$instance\", code=~\"4..\"}[$__interval]))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "4XX's"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\", route=~\"$route\", instance=~\"$instance\", code=~\"5..\"}[$__interval]))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "5XX's"
                        }
                    ],
                    "title": "Panel Title",
                    "type": "gauge"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "custom": {
                                "drawStyle": "line",
                                "lineInterpolation": "smooth",
                                "barAlignment": 0,
                                "lineWidth": 1,
                                "fillOpacity": 3,
                                "gradientMode": "scheme",
                                "spanNulls": false,
                                "insertNulls": false,
                                "showPoints": "auto",
                                "pointSize": 5,
                                "stacking": {
                                    "mode": "none",
                                    "group": "A"
                                },
                                "axisPlacement": "auto",
                                "axisLabel": "",
                                "axisColorMode": "series",
                                "axisBorderShow": true,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "axisCenteredZero": false,
                                "hideFrom": {
                                    "tooltip": false,
                                    "viz": false,
                                    "legend": false
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "color": {
                                "mode": "palette-classic"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    }
                                ]
                            },
                            "fieldMinMax": false
                        },
                        "overrides": [
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "total rps"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "total"
                                    },
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "#ffffff",
                                            "mode": "fixed"
                                        }
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "not 5XX's"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "not server errors"
                                    },
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "dark-green",
                                            "mode": "fixed"
                                        }
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "2XX's"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "Success"
                                    },
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "light-green",
                                            "mode": "fixed"
                                        }
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "4XX's"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "Client errors"
                                    },
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "dark-yellow",
                                            "mode": "fixed"
                                        }
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "5XX's"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "Server errors"
                                    },
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "dark-red",
                                            "mode": "fixed"
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 24,
                        "x": 0,
                        "y": 17
                    },
                    "id": 75,
                    "options": {
                        "tooltip": {
                            "mode": "single",
                            "sort": "none",
                            "maxHeight": 600
                        },
                        "legend": {
                            "showLegend": true,
                            "displayMode": "list",
                            "placement": "right",
                            "calcs": ["max", "min"]
                        }
                    },
                    "targets": [
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\",route=~\"$route\",instance=~\"$instance\"}[$__interval]))",
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "total rps"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\",route=~\"$route\",instance=~\"$instance\",code!~\"5..\"}[$__interval]))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "not 5XX's"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\",route=~\"$route\",instance=~\"$instance\",code=~\"2..\"}[$__interval]))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "2XX's"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\",route=~\"$route\",instance=~\"$instance\",code=~\"5..\"}[$__interval]))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "5XX's"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\",route=~\"$route\",instance=~\"$instance\",code=~\"4..\"}[$__interval]))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "4XX's"
                        }
                    ],
                    "title": "Requests per second (RPS) by status",
                    "type": "timeseries"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "custom": {
                                "drawStyle": "line",
                                "lineInterpolation": "smooth",
                                "barAlignment": 0,
                                "lineWidth": 1,
                                "fillOpacity": 3,
                                "gradientMode": "none",
                                "spanNulls": false,
                                "insertNulls": false,
                                "showPoints": "auto",
                                "pointSize": 5,
                                "stacking": {
                                    "mode": "none",
                                    "group": "A"
                                },
                                "axisPlacement": "auto",
                                "axisLabel": "",
                                "axisColorMode": "text",
                                "axisBorderShow": true,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "axisCenteredZero": false,
                                "hideFrom": {
                                    "tooltip": false,
                                    "viz": false,
                                    "legend": false
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                },
                                "lineStyle": {
                                    "fill": "solid"
                                }
                            },
                            "color": {
                                "mode": "thresholds",
                                "seriesBy": "max"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "transparent",
                                        "value": null
                                    }
                                ]
                            },
                            "fieldMinMax": false
                        },
                        "overrides": [
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "5XX's"
                                },
                                "properties": [
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "#C4162A",
                                            "mode": "shades"
                                        }
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "4XX's"
                                },
                                "properties": [
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "dark-yellow",
                                            "mode": "shades"
                                        }
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "2XX's"
                                },
                                "properties": [
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "dark-green",
                                            "mode": "shades"
                                        }
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "3XX's"
                                },
                                "properties": [
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "dark-purple",
                                            "mode": "shades"
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 24,
                        "x": 0,
                        "y": 24
                    },
                    "id": null,
                    "options": {
                        "tooltip": {
                            "mode": "single",
                            "sort": "none",
                            "maxHeight": 600
                        },
                        "legend": {
                            "showLegend": true,
                            "displayMode": "table",
                            "placement": "right",
                            "calcs": ["max", "min"]
                        }
                    },
                    "targets": [
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\",route=~\"$route\",instance=~\"$instance\",code=~\"5..\"}[$__interval])) by (code)",
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "5XX's"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\",route=~\"$route\",instance=~\"$instance\",code=~\"4..\"}[$__interval])) by (code)",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "4XX's"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\",route=~\"$route\",instance=~\"$instance\",code=~\"2..\"}[$__interval])) by (code)",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "2XX's"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\",route=~\"$route\",instance=~\"$instance\",code=~\"3..\"}[$__interval])) by (code)",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "3XX's"
                        }
                    ],
                    "title": "Requests per second (RPS) by status code",
                    "type": "timeseries"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "custom": {
                                "drawStyle": "line",
                                "lineInterpolation": "smooth",
                                "barAlignment": 0,
                                "lineWidth": 1,
                                "fillOpacity": 3,
                                "gradientMode": "none",
                                "spanNulls": false,
                                "insertNulls": false,
                                "showPoints": "auto",
                                "pointSize": 5,
                                "stacking": {
                                    "mode": "none",
                                    "group": "A"
                                },
                                "axisPlacement": "auto",
                                "axisLabel": "",
                                "axisColorMode": "text",
                                "axisBorderShow": true,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "axisCenteredZero": false,
                                "hideFrom": {
                                    "tooltip": false,
                                    "viz": false,
                                    "legend": false
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                },
                                "lineStyle": {
                                    "fill": "solid"
                                }
                            },
                            "color": {
                                "mode": "thresholds",
                                "seriesBy": "max"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "transparent",
                                        "value": null
                                    }
                                ]
                            },
                            "fieldMinMax": false
                        },
                        "overrides": [
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "routes"
                                },
                                "properties": [
                                    {
                                        "id": "color",
                                        "value": {
                                            "fixedColor": "blue",
                                            "mode": "palette-classic"
                                        }
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "services"
                                },
                                "properties": [
                                    {
                                        "id": "color",
                                        "value": {
                                            "mode": "palette-classic"
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    "gridPos": {
                        "h": 7,
                        "w": 24,
                        "x": 0,
                        "y": 31
                    },
                    "id": null,
                    "options": {
                        "tooltip": {
                            "mode": "single",
                            "sort": "none",
                            "maxHeight": 600
                        },
                        "legend": {
                            "showLegend": true,
                            "displayMode": "table",
                            "placement": "right",
                            "calcs": ["max", "min"]
                        }
                    },
                    "targets": [
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\",route=~\"$route\",instance=~\"$instance\"}[$__interval])) by (route)",
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "routes"
                        },
                        {
                            "expr": "sum(rate(apisix_http_status{service=~\"$service\",route=~\"$route\",instance=~\"$instance\"}[$__interval])) by (service)",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "services"
                        }
                    ],
                    "title": "Requests per second (RPS) per service/route",
                    "type": "timeseries"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "custom": {
                                "drawStyle": "line",
                                "lineInterpolation": "smooth",
                                "barAlignment": 0,
                                "lineWidth": 1,
                                "fillOpacity": 3,
                                "gradientMode": "none",
                                "spanNulls": false,
                                "insertNulls": false,
                                "showPoints": "auto",
                                "pointSize": 5,
                                "stacking": {
                                    "mode": "none",
                                    "group": "A"
                                },
                                "axisPlacement": "auto",
                                "axisLabel": "",
                                "axisColorMode": "text",
                                "axisBorderShow": false,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "axisCenteredZero": false,
                                "hideFrom": {
                                    "tooltip": false,
                                    "viz": false,
                                    "legend": false
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "color": {
                                "mode": "palette-classic"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "ms"
                        },
                        "overrides": [
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "P90"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "P90"
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "P95"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "P95"
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "P99"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "P99"
                                    }
                                ]
                            }
                        ]
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 8,
                        "x": 0,
                        "y": 38
                    },
                    "id": null,
                    "options": {
                        "tooltip": {
                            "mode": "single",
                            "sort": "none",
                            "maxHeight": 600
                        },
                        "legend": {
                            "showLegend": true,
                            "displayMode": "list",
                            "placement": "bottom",
                            "calcs": []
                        }
                    },
                    "targets": [
                        {
                            "expr": "histogram_quantile(0.90, sum(rate(apisix_http_latency_bucket{type=~\"request\",service=~\"$service\",consumer=~\"$consumer\",node=~\"$node\"}[$__interval])) by (le))",
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "P90"
                        },
                        {
                            "expr": "histogram_quantile(0.95, sum(rate(apisix_http_latency_bucket{type=~\"request\",service=~\"$service\",consumer=~\"$consumer\",node=~\"$node\"}[$__interval])) by (le))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "P95"
                        },
                        {
                            "expr": "histogram_quantile(0.99, sum(rate(apisix_http_latency_bucket{type=~\"request\",service=~\"$service\",consumer=~\"$consumer\",node=~\"$node\"}[$__interval])) by (le))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "P99"
                        }
                    ],
                    "title": "Request Latency",
                    "type": "timeseries"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "custom": {
                                "drawStyle": "line",
                                "lineInterpolation": "smooth",
                                "barAlignment": 0,
                                "lineWidth": 1,
                                "fillOpacity": 0,
                                "gradientMode": "none",
                                "spanNulls": false,
                                "insertNulls": false,
                                "showPoints": "auto",
                                "pointSize": 5,
                                "stacking": {
                                    "mode": "none",
                                    "group": "A"
                                },
                                "axisPlacement": "auto",
                                "axisLabel": "",
                                "axisColorMode": "text",
                                "axisBorderShow": false,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "axisCenteredZero": false,
                                "hideFrom": {
                                    "tooltip": false,
                                    "viz": false,
                                    "legend": false
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "color": {
                                "mode": "palette-classic"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "ms"
                        },
                        "overrides": [
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "P90"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "P90"
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "P95"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "P95"
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "P99"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "P99"
                                    }
                                ]
                            }
                        ]
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 8,
                        "x": 8,
                        "y": 38
                    },
                    "id": null,
                    "options": {
                        "tooltip": {
                            "mode": "single",
                            "sort": "none",
                            "maxHeight": 600
                        },
                        "legend": {
                            "showLegend": true,
                            "displayMode": "list",
                            "placement": "bottom",
                            "calcs": []
                        }
                    },
                    "targets": [
                        {
                            "expr": "histogram_quantile(0.90, sum(rate(apisix_http_latency_bucket{type=~\"apisix\",service=~\"$service\",consumer=~\"$consumer\",node=~\"$node\"}[$__interval])) by (le))",
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "P90"
                        },
                        {
                            "expr": "histogram_quantile(0.95, sum(rate(apisix_http_latency_bucket{type=~\"apisix\",service=~\"$service\",consumer=~\"$consumer\",node=~\"$node\"}[$__interval])) by (le))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "P95"
                        },
                        {
                            "expr": "histogram_quantile(0.99, sum(rate(apisix_http_latency_bucket{type=~\"apisix\",service=~\"$service\",consumer=~\"$consumer\",node=~\"$node\"}[$__interval])) by (le))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "P99"
                        }
                    ],
                    "title": "APISIX Latency",
                    "type": "timeseries"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "custom": {
                                "drawStyle": "line",
                                "lineInterpolation": "smooth",
                                "barAlignment": 0,
                                "lineWidth": 1,
                                "fillOpacity": 3,
                                "gradientMode": "none",
                                "spanNulls": false,
                                "insertNulls": false,
                                "showPoints": "auto",
                                "pointSize": 5,
                                "stacking": {
                                    "mode": "none",
                                    "group": "A"
                                },
                                "axisPlacement": "auto",
                                "axisLabel": "",
                                "axisColorMode": "text",
                                "axisBorderShow": false,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "axisCenteredZero": false,
                                "hideFrom": {
                                    "tooltip": false,
                                    "viz": false,
                                    "legend": false
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "color": {
                                "mode": "palette-classic"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "ms"
                        },
                        "overrides": [
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "P90"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "P90"
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "P95"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "P95"
                                    }
                                ]
                            },
                            {
                                "matcher": {
                                    "id": "byFrameRefID",
                                    "options": "P99"
                                },
                                "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "P99"
                                    }
                                ]
                            }
                        ]
                    },
                    "gridPos": {
                        "h": 8,
                        "w": 8,
                        "x": 16,
                        "y": 38
                    },
                    "id": null,
                    "options": {
                        "tooltip": {
                            "mode": "single",
                            "sort": "none",
                            "maxHeight": 600
                        },
                        "legend": {
                            "showLegend": true,
                            "displayMode": "list",
                            "placement": "bottom",
                            "calcs": []
                        }
                    },
                    "targets": [
                        {
                            "expr": "histogram_quantile(0.90, sum(rate(apisix_http_latency_bucket{type=~\"upstream\",service=~\"$service\",consumer=~\"$consumer\",node=~\"$node\"}[$__interval])) by (le))",
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "P90"
                        },
                        {
                            "expr": "histogram_quantile(0.95, sum(rate(apisix_http_latency_bucket{type=~\"upstream\",service=~\"$service\",consumer=~\"$consumer\",node=~\"$node\"}[$__interval])) by (le))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "P95"
                        },
                        {
                            "expr": "histogram_quantile(0.99, sum(rate(apisix_http_latency_bucket{type=~\"upstream\",service=~\"$service\",consumer=~\"$consumer\",node=~\"$node\"}[$__interval])) by (le))",
                            "hide": false,
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "P99"
                        }
                    ],
                    "title": "Upstream Latency",
                    "type": "timeseries"
                }
            ],
            "title": "APISIX HTTP",
            "type": "row"
        },
        {
            "collapsed": true,
            "id": null,
            "panels": [
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "custom": {
                                "drawStyle": "line",
                                "lineInterpolation": "smooth",
                                "barAlignment": 0,
                                "lineWidth": 1,
                                "fillOpacity": 3,
                                "gradientMode": "none",
                                "spanNulls": false,
                                "insertNulls": false,
                                "showPoints": "auto",
                                "pointSize": 5,
                                "stacking": {
                                    "mode": "none",
                                    "group": "A"
                                },
                                "axisPlacement": "auto",
                                "axisLabel": "",
                                "axisColorMode": "text",
                                "axisBorderShow": false,
                                "scaleDistribution": {
                                    "type": "linear"
                                },
                                "axisCenteredZero": false,
                                "hideFrom": {
                                    "tooltip": false,
                                    "viz": false,
                                    "legend": false
                                },
                                "thresholdsStyle": {
                                    "mode": "off"
                                }
                            },
                            "color": {
                                "mode": "palette-classic"
                            },
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "unit": "short"
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 10,
                        "w": 19,
                        "x": 0,
                        "y": 4
                    },
                    "id": null,
                    "options": {
                        "tooltip": {
                            "mode": "single",
                            "sort": "none"
                        },
                        "legend": {
                            "showLegend": true,
                            "displayMode": "list",
                            "placement": "bottom",
                            "calcs": []
                        }
                    },
                    "targets": [
                        {
                            "expr": "sum(apisix_etcd_modify_indexes{instance=~\"$instance\"}) by (key)",
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "A"
                        }
                    ],
                    "title": "Etcd modify indexes",
                    "type": "timeseries"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "color": {
                                "mode": "thresholds"
                            }
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 5,
                        "w": 5,
                        "x": 19,
                        "y": 4
                    },
                    "id": null,
                    "options": {
                        "reduceOptions": {
                            "values": false,
                            "calcs": ["lastNotNull"],
                            "fields": ""
                        },
                        "orientation": "auto",
                        "textMode": "auto",
                        "wideLayout": true,
                        "colorMode": "value",
                        "graphMode": "area",
                        "justifyMode": "auto",
                        "showPercentChange": false,
                        "percentChangeColorMode": "standard"
                    },
                    "targets": [
                        {
                            "expr": "sum(apisix_etcd_reachable{instance=~\"$instance\"})",
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "apisix_etcd_reachable"
                        }
                    ],
                    "title": "Etcd reachable",
                    "type": "stat"
                },
                {
                    "datasource": "${DS_PROMETHEUS}",
                    "fieldConfig": {
                        "defaults": {
                            "mappings": [],
                            "thresholds": {
                                "mode": "absolute",
                                "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                ]
                            },
                            "color": {
                                "mode": "thresholds"
                            }
                        },
                        "overrides": []
                    },
                    "gridPos": {
                        "h": 5,
                        "w": 5,
                        "x": 19,
                        "y": 9
                    },
                    "id": 102,
                    "options": {
                        "reduceOptions": {
                            "values": false,
                            "calcs": ["lastNotNull"],
                            "fields": ""
                        },
                        "orientation": "auto",
                        "textMode": "auto",
                        "wideLayout": true,
                        "colorMode": "value",
                        "graphMode": "area",
                        "justifyMode": "auto",
                        "showPercentChange": false,
                        "percentChangeColorMode": "standard"
                    },
                    "targets": [
                        {
                            "expr": "sum(apisix_nginx_metric_errors_total{instance=~\"$instance\"})",
                            "instant": false,
                            "legendFormat": "__auto",
                            "range": true,
                            "refId": "apisix_etcd_reachable"
                        }
                    ],
                    "title": "Nginx metric errors",
                    "type": "stat"
                }
            ],
            "title": "APISIX Misc",
            "type": "row"
        }
    ],
    "refresh": "10s",
    "schemaVersion": 26,
    "style": "dark",
    "tags": ["APISIX", "prometheus", "hambn"],
    "templating": {
        "list": [
            {
                "allValue": ".*",
                "current": {},
                "datasource": "${DS_PROMETHEUS}",
                "definition": "label_values(apisix_http_status,service)",
                "error": null,
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": true,
                "name": "service",
                "options": [],
                "query": "label_values(apisix_http_status,service)",
                "refresh": 2,
                "regex": "",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
            },
            {
                "allValue": ".*",
                "current": {},
                "datasource": "${DS_PROMETHEUS}",
                "definition": "label_values(apisix_http_status,job)",
                "error": null,
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": true,
                "name": "job",
                "options": [],
                "query": "label_values(apisix_http_status,job)",
                "refresh": 2,
                "regex": "",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
            },
            {
                "allValue": ".*",
                "current": {},
                "datasource": "${DS_PROMETHEUS}",
                "definition": "label_values(apisix_nginx_http_current_connections,instance)",
                "error": null,
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": true,
                "name": "instance",
                "options": [],
                "query": "label_values(apisix_http_status,instance)",
                "refresh": 2,
                "regex": ".*",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
            },
            {
                "allValue": ".*",
                "current": {},
                "datasource": "${DS_PROMETHEUS}",
                "definition": "label_values(apisix_nginx_http_current_connections,upstream_addr)",
                "error": null,
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": true,
                "name": "upstream_addr",
                "options": [],
                "query": "label_values(apisix_http_status,upstream_addr)",
                "refresh": 2,
                "regex": ".*",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
            },
            {
                "allValue": ".*",
                "current": {},
                "datasource": "${DS_PROMETHEUS}",
                "definition": "label_values(apisix_http_status,route_name)",
                "error": null,
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": true,
                "name": "route_name",
                "options": [],
                "query": "label_values(apisix_http_status,route_name)",
                "refresh": 2,
                "regex": "",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
            },
            {
                "allValue": ".*",
                "current": {},
                "datasource": "${DS_PROMETHEUS}",
                "definition": "label_values(apisix_http_status,matched_uri)",
                "error": null,
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": true,
                "name": "matched_uri",
                "options": [],
                "query": "label_values(apisix_http_status,matched_uri)",
                "refresh": 2,
                "regex": ".*",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
            }
        ]
    },
    "time": {
        "from": "now-2m",
        "to": "now"
    },
    "timepicker": {
        "refresh_intervals": [
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
        ],
        "time_options": [
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h",
            "2d",
            "7d",
            "30d"
        ]
    },
    "timezone": "Asia/Tehran",
    "title": "hambn's APISIX dashdash",
    "uid": "hambnsapisixdashboardxyz",
    "version": 13,
    "weekStart": "saturday"
}
